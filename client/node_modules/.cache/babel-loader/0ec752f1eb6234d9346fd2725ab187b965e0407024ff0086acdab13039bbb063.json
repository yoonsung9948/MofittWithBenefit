{"ast":null,"code":"var _jsxFileName = \"/Users/yoonsunghwang/My Projects/moffitt/client/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport './App.css';\nimport NavBar from './components/NavBar';\nimport OuterContainer from './components/OuterContainer';\nimport ProfilePage from './components/ProfilePage';\nimport SwipePage from './components/SwipePage';\nimport MatchedProfiles from './components/MatchedProfiles';\nimport ErrorPage from './components/ErrorPage';\nimport CreateProfile from './components/CreateProfile';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst pages = {\n  swipe: /*#__PURE__*/_jsxDEV(SwipePage, {\n    cardData: 'dummy'\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this),\n  profile: /*#__PURE__*/_jsxDEV(ProfilePage, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, this),\n  matched: /*#__PURE__*/_jsxDEV(MatchedProfiles, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this)\n};\nfunction App() {\n  _s();\n  const width = window.innerWidth > 992 ? 428 : '100%';\n  const [isLoading, setLoading] = useState(true);\n  const dbName = 'userProfileDB';\n  const objectStoreName = 'profiles';\n  const [userProfile, setUserProfile] = useState({\n    firstName: '',\n    lastName: '',\n    gender: 'female',\n    photos: [],\n    location: 3\n  });\n  const [objectStore, setObjectStore] = useState();\n  const [page, setPage] = useState('swipe');\n  useEffect(() => {\n    if (!isLoading) {\n      const loadingPage = document.getElementById('loading');\n      if (loadingPage) loadingPage.style.display = 'none';\n    }\n  }, [isLoading]);\n\n  /* connect to database, if profile exists retrieve it, otherwise render CreateProfile */\n  useEffect(() => {\n    let hasProfile = true;\n    const request = window.indexedDB.open(dbName);\n    /* DB not supported or error occurred */\n    request.onerror = event => {\n      return /*#__PURE__*/_jsxDEV(ErrorPage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this);\n    };\n    /* DB doesn't exist, create DB and request.onsuccess event fires. */\n    request.onupgradeneeded = event => {\n      const db = event.target.result;\n      db.createObjectStore(objectStoreName, {\n        keyPath: \"id\"\n      });\n      hasProfile = false;\n    };\n    /* DB exists */\n    request.onsuccess = event => {\n      const db = event.target.result;\n      const transaction = db.transaction(objectStoreName, \"readwrite\");\n      const objectStore = transaction.objectStore(objectStoreName);\n      setObjectStore(objectStore);\n      if (hasProfile) {\n        const getAllRequest = objectStore.getAll();\n        getAllRequest.onsuccess = () => {\n          const allData = getAllRequest.result;\n          if (allData.length > 1) {\n            console.error('multiple user profiles...');\n          } else {\n            setUserProfile(allData[0]);\n          }\n        };\n        getAllRequest.onerror = () => {\n          console.error(\"Error retrieving data:\", getAllRequest.error);\n        };\n      } else {\n        return /*#__PURE__*/_jsxDEV(CreateProfile, {\n          setUserProfile: setUserProfile,\n          objectStore: objectStore\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this);\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      justifyContent: 'center'\n    },\n    children: /*#__PURE__*/_jsxDEV(OuterContainer, {\n      setLoading: setLoading,\n      width: width,\n      children: [pages[page], /*#__PURE__*/_jsxDEV(NavBar, {\n        setPage: setPage,\n        width: width\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"vTN66RxOZvM72SghtWQx7xiRWpk=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","NavBar","OuterContainer","ProfilePage","SwipePage","MatchedProfiles","ErrorPage","CreateProfile","jsxDEV","_jsxDEV","pages","swipe","cardData","fileName","_jsxFileName","lineNumber","columnNumber","profile","matched","App","_s","width","window","innerWidth","isLoading","setLoading","dbName","objectStoreName","userProfile","setUserProfile","firstName","lastName","gender","photos","location","objectStore","setObjectStore","page","setPage","loadingPage","document","getElementById","style","display","hasProfile","request","indexedDB","open","onerror","event","onupgradeneeded","db","target","result","createObjectStore","keyPath","onsuccess","transaction","getAllRequest","getAll","allData","length","console","error","justifyContent","children","_c","$RefreshReg$"],"sources":["/Users/yoonsunghwang/My Projects/moffitt/client/src/App.tsx"],"sourcesContent":["import React, { useRef, useEffect, useState, ReactComponentElement, ReactNode, useLayoutEffect } from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './App.css';\nimport NavBar from './components/NavBar';\nimport { Box, Container } from '@mui/material';\n\nimport OuterContainer from './components/OuterContainer';\nimport { WidthWideOutlined } from '@mui/icons-material';\n\nimport ProfilePage from './components/ProfilePage';\nimport SwipePage from './components/SwipePage';\nimport MatchedProfiles from './components/MatchedProfiles';\nimport ErrorPage from './components/ErrorPage';\nimport CreateProfile from './components/CreateProfile';\n\ntype PageType = 'swipe' | 'profile' | 'matched';\ninterface UserProfile {\n  firstName: string;\n  lastName: string;\n  gender: 'male' | 'female' | 'non-binary';\n  photos: string[];\n  location: 3 | 4 | 5;\n}\n\ninterface UserData {\n  userProfile: UserProfile;\n  setUserProfile: Function;\n}\n\nconst pages: Record<string, JSX.Element> = {\n  swipe: (\n    <SwipePage cardData={'dummy'}/>\n  ),\n  profile: (\n    <ProfilePage />\n  ),\n  matched: (\n    <MatchedProfiles />\n  )\n};\n\n\nfunction App() {\n  const width = window.innerWidth > 992 ? 428 : '100%';\n  const [isLoading, setLoading] = useState<boolean>(true);\n  const dbName = 'userProfileDB';\n  const objectStoreName = 'profiles';\n  const [userProfile, setUserProfile] = useState<UserProfile>({\n    firstName: '',\n    lastName: '',\n    gender: 'female',\n    photos: [],\n    location: 3,\n  });\n  const [objectStore, setObjectStore] = useState<IDBObjectStore>();\n  const [page, setPage] = useState<PageType>('swipe');\n  useEffect(() => {\n    if (!isLoading) {\n      const loadingPage = document.getElementById('loading');\n      if (loadingPage)\n        loadingPage.style.display = 'none';\n    }\n  }, [isLoading])\n\n  /* connect to database, if profile exists retrieve it, otherwise render CreateProfile */\n  useEffect(() => {\n    let hasProfile = true;\n    const request = window.indexedDB.open(dbName);\n    /* DB not supported or error occurred */\n    request.onerror = (event: Event) => {\n      return (\n        <ErrorPage />\n      )\n    }\n    /* DB doesn't exist, create DB and request.onsuccess event fires. */\n    request.onupgradeneeded = (event: Event) => {\n      const db = (event.target as IDBOpenDBRequest).result;\n      db.createObjectStore(objectStoreName, { keyPath: \"id\" });\n      hasProfile = false;\n    }\n    /* DB exists */\n    request.onsuccess = (event: Event) => {\n      const db = (event.target as IDBOpenDBRequest).result;\n      const transaction = db.transaction(objectStoreName, \"readwrite\");\n      const objectStore = transaction.objectStore(objectStoreName);\n      setObjectStore(objectStore);\n      if (hasProfile) {\n        const getAllRequest = objectStore.getAll();\n\n        getAllRequest.onsuccess = () => {\n          const allData = getAllRequest.result;\n          if (allData.length > 1) {\n            console.error('multiple user profiles...');\n          } else {\n            setUserProfile(allData[0]);\n          }\n        };\n      \n        getAllRequest.onerror = () => {\n          console.error(\"Error retrieving data:\", getAllRequest.error);\n        };\n      } else {\n        return (\n          <CreateProfile setUserProfile={setUserProfile} objectStore={objectStore} />\n        )\n      }\n    }\n\n  }, [])\n\n\n  return (\n    <div  style={{display: 'flex', justifyContent: 'center'}}>\n      <OuterContainer setLoading={setLoading} width={width}>\n        {pages[page]}\n        <NavBar setPage={setPage} width={width} />\n      </OuterContainer>\n    </div>\n  )\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}